CREATE DATABASE DBNAME;
USE DBNAME;
CREATE TABLE DBNAME.PRODUCT_STATUS (
    PRODUCT_STATUS_ID INT NOT NULL AUTO_INCREMENT,
    PRODUCT_STATUS_NAME VARCHAR(30),
    PRODUCT_STATUS_INITIALS VARCHAR(15),
    CONSTRAINT PRODUCT_STATUS_PK PRIMARY KEY (PRODUCT_STATUS_ID)
);
CREATE TABLE DBNAME.PRODUCT_STATUS (     PRODUCT_STATUS_ID INT NOT NULL AUTO_INCREMENT,     PRODUCT_STATUS_NAME VARCHAR(30),     PRODUCT_STATUS_INITIALS VARCHAR(15),     CONSTRAINT PRODUCT_STATUS_PK PRIMARY KEY (PRODUCT_STATUS_ID) );
CREATE TABLE DBNAME.PRODUCTS (
    PRODUCT_ID INT NOT NULL AUTO_INCREMENT,
    PRODUCTS_NAME VARCHAR(30),
    MERCHANT_ID INT NOT NULL,
    PRICE INT NOT NULL,
    PRODUCT_STATUS_ID INT NOT NULL,
    CREATED_AT DATETIME DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT PRODUCTS_PK PRIMARY KEY(PRODUCT_ID),
    CONSTRAINT PRODUCT_PRODUCT_STATUS_FK FOREIGN KEY(PRODUCT_STATUS_ID) REFERENCES PRODUCT_STATUS(PRODUCT_STATUS_ID)
);
CREATE TABLE DBNAME.PRODUCTS (     PRODUCT_ID INT NOT NULL AUTO_INCREMENT,     PRODUCTS_NAME VARCHAR(30),     MERCHANT_ID INT NOT NULL,     PRICE INT NOT NULL,     PRODUCT_STATUS_ID INT NOT NULL,     CREATED_AT DATETIME DEFAULT CURRENT_TIMESTAMP,     CONSTRAINT PRODUCTS_PK PRIMARY KEY(PRODUCT_ID),     CONSTRAINT PRODUCT_PRODUCT_STATUS_FK FOREIGN KEY(PRODUCT_STATUS_ID) REFERENCES PRODUCT_STATUS(PRODUCT_STATUS_ID) );
CREATE TABLE DBNAME.USERS (
    USER_ID INT NOT NULL AUTO_INCREMENT,
    FULL_NAME VARCHAR(30),
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    COUNTRY_CODE INT,
    CONSTRAINT USERS_PK PRIMARY KEY(USER_ID)
);
CREATE TABLE DBNAME.USERS (     USER_ID INT NOT NULL AUTO_INCREMENT,     FULL_NAME VARCHAR(30),     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,     COUNTRY_CODE INT,     CONSTRAINT USERS_PK PRIMARY KEY(USER_ID) );
CREATE TABLE DBNAME.ORDERS (
    ORDER_ID INT NOT NULL AUTO_INCREMENT,
    USER_ID INT,
    ORDER_STATUS VARCHAR(10),
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT ORDER_PK PRIMARY KEY(ORDER_ID),
    CONSTRAINT ORDER_USER_PK FOREIGN KEY(USER_ID) REFERENCES USERS(USER_ID)
);
CREATE TABLE DBNAME.ORDERS (     ORDER_ID INT NOT NULL AUTO_INCREMENT,     USER_ID INT,     ORDER_STATUS VARCHAR(10),     CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,     CONSTRAINT ORDER_PK PRIMARY KEY(ORDER_ID),     CONSTRAINT ORDER_USER_PK FOREIGN KEY(USER_ID) REFERENCES USERS(USER_ID) );
CREATE TABLE DBNAME.ORDER_ITEMS (
    ORDER_ITEMS_ID INT NOT NULL AUTO_INCREMENT,
    ORDER_ID INT,
    PRODUCT_ID INT,
    QUANTITY INT NOT NULL,
    CONSTRAINT ORDER_ITEMS_PK PRIMARY KEY(ORDER_ITEMS_ID),
    CONSTRAINT ORDER_ITEMS_ORDER_FK FOREIGN KEY(ORDER_ID) REFERENCES ORDERS(ORDER_ID),
    CONSTRAINT ORDER_ITEMS_PRODUCTS_FK FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID)
);
CREATE TABLE DBNAME.ORDER_ITEMS (     ORDER_ITEMS_ID INT NOT NULL AUTO_INCREMENT,     ORDER_ID INT,     PRODUCT_ID INT,     QUANTITY INT NOT NULL,     CONSTRAINT ORDER_ITEMS_PK PRIMARY KEY(ORDER_ITEMS_ID),     CONSTRAINT ORDER_ITEMS_ORDER_FK FOREIGN KEY(ORDER_ID) REFERENCES ORDERS(ORDER_ID),     CONSTRAINT ORDER_ITEMS_PRODUCTS_FK FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID) );
INSERT INTO DBNAME.PRODUCT_STATUS (`PRODUCT_STATUS_NAME`,`PRODUCT_STATUS_INITIALS`) VALUES ('ON STOCK', 'ON_STOCK');
INSERT INTO DBNAME.PRODUCT_STATUS (`PRODUCT_STATUS_NAME`, `PRODUCT_STATUS_INITIALS`) VALUES ("OUT OF STOCK", "OUT_OF_STOCK");
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES ("PRODUCT A", "1", 100, SELECT PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = "ON_STOCK");
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES ("PRODUCT B", "2", 123, SELECT PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = "OUT_OF_STOCK");
INSERT INTO DBNAME.USERS (FULL_NAME, COUNTRY_CODE) VALUE ("USER NAME 1", 55);
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES (SELECT "PRODUCT A", "1", 100, PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = "ON_STOCK");
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES (SELECT "PRODUCT B", "2", 123, PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = "OUT_OF_STOCK");
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES (SELECT 'PRODUCT A', '1', 100, PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = 'ON_STOCK');
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES (SELECT 'PRODUCT A', 1, 100, PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = 'ON_STOCK');
SELECT 'PRODUCT A', 1, 100, PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = 'ON_STOCK');
SELECT 'PRODUCT A', 1, 100, PRODUCT_STATUS_ID FROM DBNAME.PRODUCT_STATUS WHERE PRODUCT_STATUS_INITIALS = 'ON_STOCK';
SELECT * FROM DBNAME.PRODUCTS
;
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES ('PRODUCT A', 1, 100, 1);
INSERT INTO DBNAME.PRODUCTS (`PRODUCTS_NAME`, `MERCHANT_ID`, `PRICE`, `PRODUCT_STATUS_ID`) VALUES ('PRODUCT B', 2, 123, 2);
SELECT * FROM DBNAME.PRODUCTS